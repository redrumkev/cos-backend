[tool:pytest]
addopts =
    --benchmark-save=latest
    --benchmark-min-rounds=200
    --benchmark-warmup-iterations=10
    --benchmark-max-time=5.0
    --benchmark-disable-gc
    --benchmark-only-save-benchmarks
    --strict-markers
    --strict-config
    -v

markers =
    unit: Unit tests
    integration: Integration tests
    performance: Performance benchmark tests
    slow: Slow-running tests
    requires_redis: Tests requiring Redis service
    requires_postgres: Tests requiring PostgreSQL service
    requires_neo4j: Tests requiring Neo4j service
    requires_all_services: Tests requiring all infrastructure services
    benchmark: pytest-benchmark performance tests

# Performance test isolation
testpaths = tests

# Benchmark configuration
benchmark-group-by = func
benchmark-sort = mean
benchmark-compare-fail = mean:10% median:10% stddev:20%

# Filter configuration for CI
filterwarnings =
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::DeprecationWarning
    ignore::UserWarning
